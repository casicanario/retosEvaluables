<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Películas y Profesionales</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .navbar {
            background: rgba(44, 62, 80, 0.95) !important;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        
        .nav-link {
            color: white !important;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover, .nav-link.active {
            color: #3498db !important;
            transform: translateY(-2px);
        }
        
        .section-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            margin: 20px 0;
            padding: 30px;
        }
        
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin-bottom: 20px;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .movie-poster {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 10px;
        }
        
        .professional-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #3498db;
        }
        
        .btn-custom {
            background: linear-gradient(45deg, #3498db, #2980b9);
            border: none;
            border-radius: 25px;
            padding: 10px 25px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        
        .form-control, .form-select {
            border-radius: 10px;
            border: 2px solid #e9ecef;
            padding: 12px 15px;
            transition: all 0.3s ease;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: #3498db;
            box-shadow: 0 0 0 0.2rem rgba(52, 152, 219, 0.25);
        }
        
        .section-title {
            color: var(--primary-color);
            font-weight: 700;
            margin-bottom: 30px;
            position: relative;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 50px;
            height: 3px;
            background: linear-gradient(45deg, #3498db, #2980b9);
            border-radius: 2px;
        }
        
        .stats-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin: 10px 0;
        }
        
        .hidden {
            display: none !important;
        }
        
        .loading {
            text-align: center;
            padding: 50px;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#">
                <i class="fas fa-film me-2"></i>MovieSystem
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" onclick="showSection('movies')">
                            <i class="fas fa-video me-1"></i>Películas
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('professionals')">
                            <i class="fas fa-users me-1"></i>Profesionales
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('stats')">
                            <i class="fas fa-chart-bar me-1"></i>Estadísticas
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container" style="margin-top: 100px;">
        
        <!-- Movies Section -->
        <div id="moviesSection" class="section-container fade-in">
            <h2 class="section-title">
                <i class="fas fa-film me-3"></i>Gestión de Películas
            </h2>
            
            <!-- Movie Form -->
            <div class="row">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <h5><i class="fas fa-plus me-2"></i>Nueva Película</h5>
                        </div>
                        <div class="card-body">
                            <form id="movieForm">
                                <div class="mb-3">
                                    <label class="form-label">Título</label>
                                    <input type="text" class="form-control" id="movieTitle" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Año de Estreno</label>
                                    <input type="number" class="form-control" id="movieYear" min="1900" max="2030" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Director</label>
                                    <select class="form-select" id="movieDirector" required>
                                        <option value="">Seleccionar Director</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Escritor</label>
                                    <select class="form-select" id="movieWriter" required>
                                        <option value="">Seleccionar Escritor</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Actores</label>
                                    <select class="form-select" id="movieActors" multiple>
                                        <!-- Los actores se cargarán aquí -->
                                    </select>
                                    <small class="text-muted">Mantén Ctrl para seleccionar múltiples actores</small>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Nacionalidad</label>
                                    <input type="text" class="form-control" id="movieNationality" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Idioma</label>
                                    <input type="text" class="form-control" id="movieLanguage" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Plataforma</label>
                                    <input type="text" class="form-control" id="moviePlatform" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">¿Es MCU?</label>
                                    <select class="form-select" id="movieMCU" required>
                                        <option value="">Seleccionar</option>
                                        <option value="true">Sí</option>
                                        <option value="false">No</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Personaje Principal</label>
                                    <input type="text" class="form-control" id="movieMainCharacter" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Productor</label>
                                    <input type="text" class="form-control" id="movieProducer" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Distribuidor</label>
                                    <input type="text" class="form-control" id="movieDistributor" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Género</label>
                                    <input type="text" class="form-control" id="movieGenre" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">URL de la Imagen</label>
                                    <input type="url" class="form-control" id="moviePhoto" required>
                                </div>
                                <button type="submit" class="btn btn-custom w-100">
                                    <i class="fas fa-save me-2"></i>Guardar Película
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Movies List -->
                <div class="col-md-8">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h5>Lista de Películas</h5>
                        <span class="badge bg-primary" id="moviesCount">0 películas</span>
                    </div>
                    <div id="moviesList" class="row">
                        <!-- Movies will be displayed here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Professionals Section -->
        <div id="professionalsSection" class="section-container hidden">
            <h2 class="section-title">
                <i class="fas fa-users me-3"></i>Gestión de Profesionales
            </h2>
            
            <div class="row">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header bg-success text-white">
                            <h5><i class="fas fa-user-plus me-2"></i>Nuevo Profesional</h5>
                        </div>
                        <div class="card-body">
                            <form id="professionalForm">
                                <div class="mb-3">
                                    <label class="form-label">Nombre</label>
                                    <input type="text" class="form-control" id="profName" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Edad</label>
                                    <input type="number" class="form-control" id="profAge" min="18" max="100" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Peso (kg)</label>
                                    <input type="number" class="form-control" id="profWeight" min="40" max="200" step="0.1" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Altura (cm)</label>
                                    <input type="number" class="form-control" id="profHeight" min="140" max="220" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">¿Está retirado?</label>
                                    <select class="form-select" id="profRetired" required>
                                        <option value="">Seleccionar</option>
                                        <option value="true">Sí</option>
                                        <option value="false">No</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Nacionalidad</label>
                                    <input type="text" class="form-control" id="profNationality" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Número de Oscars</label>
                                    <input type="number" class="form-control" id="profOscars" min="0" max="10" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Profesión</label>
                                    <select class="form-select" id="profProfession" required>
                                        <option value="">Seleccionar Profesión</option>
                                        <option value="Actor">Actor</option>
                                        <option value="Director">Director</option>
                                        <option value="Escritor">Escritor</option>
                                        <option value="Productor">Productor</option>
                                    </select>
                                </div>
                                <button type="submit" class="btn btn-custom w-100">
                                    <i class="fas fa-save me-2"></i>Guardar Profesional
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-8">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h5>Lista de Profesionales</h5>
                        <span class="badge bg-success" id="professionalsCount">0 profesionales</span>
                    </div>
                    <div id="professionalsList">
                        <!-- Professionals will be displayed here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics Section -->
        <div id="statsSection" class="section-container hidden">
            <h2 class="section-title">
                <i class="fas fa-chart-bar me-3"></i>Estadísticas del Sistema
            </h2>
            
            <div class="row">
                <div class="col-md-3">
                    <div class="stats-card text-center">
                        <i class="fas fa-film fa-2x mb-2"></i>
                        <h4 id="totalMovies">0</h4>
                        <p class="mb-0">Películas Total</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stats-card text-center">
                        <i class="fas fa-users fa-2x mb-2"></i>
                        <h4 id="totalProfessionals">0</h4>
                        <p class="mb-0">Profesionales</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stats-card text-center">
                        <i class="fas fa-trophy fa-2x mb-2"></i>
                        <h4 id="totalOscars">0</h4>
                        <p class="mb-0">Oscars Total</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stats-card text-center">
                        <i class="fas fa-calendar fa-2x mb-2"></i>
                        <h4 id="avgYear">2020</h4>
                        <p class="mb-0">Año Promedio</p>
                    </div>
                </div>
            </div>
            
            <div class="row mt-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-chart-pie me-2"></i>Profesionales por Profesión</h5>
                        </div>
                        <div class="card-body" id="professionStats">
                            <!-- Stats will be displayed here -->
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-globe me-2"></i>Películas por Nacionalidad</h5>
                        </div>
                        <div class="card-body" id="nationalityStats">
                            <!-- Stats will be displayed here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Clase Professional
        class Professional {
            constructor(name, age, weight, height, isRetired, nationality, oscarsNumber, profession) {
                this.name = name;
                this.age = age;
                this.weight = weight;
                this.height = height;
                this.isRetired = isRetired;
                this.nationality = nationality;
                this.oscarsNumber = oscarsNumber;
                this.profession = profession;
                this.id = Date.now() + Math.random(); // ID único
            }
        }

        // Clase Movie
        class Movie {
            constructor(title, releaseYear, actors, nationality, director, writer, language, plataforma, isMCU, mainCharacterName, producer, distributor, genre, photo) {
                this.title = title;
                this.releaseYear = releaseYear;
                this.actors = actors;
                this.nationality = nationality;
                this.director = director;
                this.writer = writer;
                this.language = language;
                this.plataforma = plataforma;
                this.isMCU = isMCU;
                this.mainCharacterName = mainCharacterName;
                this.producer = producer;
                this.distributor = distributor;
                this.genre = genre;
                this.photo = photo;
                this.id = Date.now() + Math.random(); // ID único
            }
        }

        // Arrays para almacenar datos
        let professionals = [];
        let movies = [];

        // Funciones de navegación
        function showSection(sectionName) {
            // Ocultar todas las secciones
            document.querySelectorAll('.section-container').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Mostrar la sección seleccionada
            document.getElementById(sectionName + 'Section').classList.remove('hidden');
            document.getElementById(sectionName + 'Section').classList.add('fade-in');
            
            // Actualizar navegación activa
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Actualizar estadísticas si es la sección de stats
            if (sectionName === 'stats') {
                updateStats();
            }
        }

        // Función para actualizar los selectores de profesionales
        function updateProfessionalSelectors() {
            const directorSelect = document.getElementById('movieDirector');
            const writerSelect = document.getElementById('movieWriter');
            const actorsSelect = document.getElementById('movieActors');
            
            // Limpiar selectores
            directorSelect.innerHTML = '<option value="">Seleccionar Director</option>';
            writerSelect.innerHTML = '<option value="">Seleccionar Escritor</option>';
            actorsSelect.innerHTML = '';
            
            // Agregar profesionales a los selectores
            professionals.forEach(prof => {
                if (prof.profession === 'Director') {
                    directorSelect.innerHTML += `<option value="${prof.id}">${prof.name}</option>`;
                }
                if (prof.profession === 'Escritor') {
                    writerSelect.innerHTML += `<option value="${prof.id}">${prof.name}</option>`;
                }
                if (prof.profession === 'Actor') {
                    actorsSelect.innerHTML += `<option value="${prof.id}">${prof.name}</option>`;
                }
            });
        }

        // Función para mostrar profesionales
        function displayProfessionals() {
            const container = document.getElementById('professionalsList');
            container.innerHTML = '';
            
            if (professionals.length === 0) {
                container.innerHTML = '<div class="text-center text-muted p-4"><i class="fas fa-users fa-3x mb-3 d-block"></i>No hay profesionales registrados</div>';
                return;
            }
            
            professionals.forEach(prof => {
                const profCard = `
                    <div class="card mb-3">
                        <div class="card-body">
                            <div class="row align-items-center">
                                <div class="col-md-2 text-center">
                                    <div class="professional-avatar bg-primary text-white d-flex align-items-center justify-content-center mx-auto">
                                        <i class="fas fa-user fa-2x"></i>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <h5 class="card-title mb-1">${prof.name}</h5>
                                    <p class="text-muted mb-2">
                                        <i class="fas fa-briefcase me-1"></i>${prof.profession} | 
                                        <i class="fas fa-flag me-1"></i>${prof.nationality} | 
                                        <i class="fas fa-birthday-cake me-1"></i>${prof.age} años
                                    </p>
                                    <small class="text-muted">
                                        <i class="fas fa-weight me-1"></i>${prof.weight}kg | 
                                        <i class="fas fa-ruler-vertical me-1"></i>${prof.height}cm | 
                                        <i class="fas fa-trophy me-1"></i>${prof.oscarsNumber} Oscars
                                        ${prof.isRetired ? ' | <i class="fas fa-bed me-1"></i>Retirado' : ' | <i class="fas fa-play me-1"></i>Activo'}
                                    </small>
                                </div>
                                <div class="col-md-2 text-end">
                                    <button class="btn btn-outline-danger btn-sm" onclick="deleteProfessional(${prof.id})">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += profCard;
            });
            
            document.getElementById('professionalsCount').textContent = `${professionals.length} profesionales`;
        }

        // Función para mostrar películas
        function displayMovies() {
            const container = document.getElementById('moviesList');
            container.innerHTML = '';
            
            if (movies.length === 0) {
                container.innerHTML = '<div class="col-12"><div class="text-center text-muted p-4"><i class="fas fa-film fa-3x mb-3 d-block"></i>No hay películas registradas</div></div>';
                return;
            }
            
            movies.forEach(movie => {
                const director = professionals.find(p => p.id == movie.director);
                const writer = professionals.find(p => p.id == movie.writer);
                const movieActors = movie.actors.map(actorId => {
                    const actor = professionals.find(p => p.id == actorId);
                    return actor ? actor.name : 'Desconocido';
                }).join(', ');
                
                const movieCard = `
                    <div class="col-md-6 col-lg-4">
                        <div class="card">
                            <img src="${movie.photo}" class="movie-poster" alt="${movie.title}" onerror="this.src='https://via.placeholder.com/300x400/666/fff?text=Sin+Imagen'">
                            <div class="card-body">
                                <h5 class="card-title">${movie.title} (${movie.releaseYear})</h5>
                                <p class="card-text">
                                    <small class="text-muted">
                                        <i class="fas fa-user-tie me-1"></i><strong>Director:</strong> ${director ? director.name : 'N/A'}<br>
                                        <i class="fas fa-pen me-1"></i><strong>Escritor:</strong> ${writer ? writer.name : 'N/A'}<br>
                                        <i class="fas fa-users me-1"></i><strong>Actores:</strong> ${movieActors || 'N/A'}<br>
                                        <i class="fas fa-tag me-1"></i><strong>Género:</strong> ${movie.genre}<br>
                                        <i class="fas fa-flag me-1"></i><strong>País:</strong> ${movie.nationality}<br>
                                        <i class="fas fa-language me-1"></i><strong>Idioma:</strong> ${movie.language}<br>
                                        <i class="fas fa-tv me-1"></i><strong>Plataforma:</strong> ${movie.plataforma}<br>
                                        ${movie.isMCU ? '<i class="fas fa-shield-alt me-1 text-warning"></i><strong>MCU</strong><br>' : ''}
                                        <i class="fas fa-star me-1"></i><strong>Personaje:</strong> ${movie.mainCharacterName}
                                    </small>
                                </p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <small class="text-muted">
                                        <i class="fas fa-building me-1"></i>${movie.producer}
                                    </small>
                                    <button class="btn btn-outline-danger btn-sm" onclick="deleteMovie(${movie.id})">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += movieCard;
            });
            
            document.getElementById('moviesCount').textContent = `${movies.length} películas`;
        }

        // Función para eliminar profesional
        function deleteProfessional(id) {
            if (confirm('¿Estás seguro de eliminar este profesional?')) {
                professionals = professionals.filter(prof => prof.id !== id);
                displayProfessionals();
                updateProfessionalSelectors();
            }
        }

        // Función para eliminar película
        function deleteMovie(id) {
            if (confirm('¿Estás seguro de eliminar esta película?')) {
                movies = movies.filter(movie => movie.id !== id);
                displayMovies();
            }
        }

        // Función para actualizar estadísticas
        function updateStats() {
            document.getElementById('totalMovies').textContent = movies.length;
            document.getElementById('totalProfessionals').textContent = professionals.length;
            
            const totalOscars = professionals.reduce((sum, prof) => sum + prof.oscarsNumber, 0);
            document.getElementById('totalOscars').textContent = totalOscars;
            
            if (movies.length > 0) {
                const avgYear = Math.round(movies.reduce((sum, movie) => sum + movie.releaseYear, 0) / movies.length);
                document.getElementById('avgYear').textContent = avgYear;
            }
            
            // Estadísticas por profesión
            const professionStats = {};
            professionals.forEach(prof => {
                professionStats[prof.profession] = (professionStats[prof.profession] || 0) + 1;
            });
            
            let professionHTML = '';
            Object.keys(professionStats).forEach(profession => {
                const count = professionStats[profession];
                const percentage = ((count / professionals.length) * 100).toFixed(1);
                professionHTML += `
                    <div class="mb-2">
                        <div class="d-flex justify-content-between">
                            <span>${profession}</span>
                            <span>${count} (${percentage}%)</span>
                        </div>
                        <div class="progress" style="height: 8px;">
                            <div class="progress-bar bg-primary" style="width: ${percentage}%"></div>
                        </div>
                    </div>
                `;
            });
            document.getElementById('professionStats').innerHTML = professionHTML || '<p class="text-muted">No hay datos disponibles</p>';
            
            // Estadísticas por nacionalidad
            const nationalityStats = {};
            movies.forEach(movie => {
                nationalityStats[movie.nationality] = (nationalityStats[movie.nationality] || 0) + 1;
            });
            
            let nationalityHTML = '';
            Object.keys(nationalityStats).forEach(nationality => {
                const count = nationalityStats[nationality];
                const percentage = ((count / movies.length) * 100).toFixed(1);
                nationalityHTML += `
                    <div class="mb-2">
                        <div class="d-flex justify-content-between">
                            <span>${nationality}</span>
                            <span>${count} (${percentage}%)</span>
                        </div>
                        <div class="progress" style="height: 8px;">
                            <div class="progress-bar bg-success" style="width: ${percentage}%"></div>
                        </div>
                    </div>
                `;
            });
            document.getElementById('nationalityStats').innerHTML = nationalityHTML || '<p class="text-muted">No hay datos disponibles</p>';
        }

        // Event Listeners
        $(document).ready(function() {
            // Formulario de profesionales
            $('#professionalForm').on('submit', function(e) {
                e.preventDefault();
                
                const professional = new Professional(
                    $('#profName').val(),
                    parseInt($('#profAge').val()),
                    parseFloat($('#profWeight').val()),
                    parseInt($('#profHeight').val()),
                    $('#profRetired').val() === 'true',
                    $('#profNationality').val(),
                    parseInt($('#profOscars').val()),
                    $('#profProfession').val()
                );
                
                professionals.push(professional);
                displayProfessionals();
                updateProfessionalSelectors();
                
                // Limpiar formulario
                this.reset();
                
                // Mostrar mensaje de éxito
                showSuccessMessage('Profesional agregado exitosamente');
            });
            
            // Formulario de películas
            $('#movieForm').on('submit', function(e) {
                e.preventDefault();
                
                const selectedActors = [];
                $('#movieActors option:selected').each(function() {
                    selectedActors.push(parseInt($(this).val()));
                });
                
                const movie = new Movie(
                    $('#movieTitle').val(),
                    parseInt($('#movieYear').val()),
                    selectedActors,
                    $('#movieNationality').val(),
                    parseInt($('#movieDirector').val()),
                    parseInt($('#movieWriter').val()),
                    $('#movieLanguage').val(),
                    $('#moviePlatform').val(),
                    $('#movieMCU').val() === 'true',
                    $('#movieMainCharacter').val(),
                    $('#movieProducer').val(),
                    $('#movieDistributor').val(),
                    $('#movieGenre').val(),
                    $('#moviePhoto').val()
                );
                
                movies.push(movie);
                displayMovies();
                
                // Limpiar formulario
                this.reset();
                
                // Mostrar mensaje de éxito
                showSuccessMessage('Película agregada exitosamente');
            });
            
            // Inicializar displays
            displayProfessionals();
            displayMovies();
            updateProfessionalSelectors();
        });

        // Función para mostrar mensajes de éxito
        function showSuccessMessage(message) {
            // Crear y mostrar toast de Bootstrap
            const toastHTML = `
                <div class="position-fixed top-0 end-0 p-3" style="z-index: 1100">
                    <div class="toast show" role="alert">
                        <div class="toast-header bg-success text-white">
                            <i class="fas fa-check-circle me-2"></i>
                            <strong class="me-auto">Éxito</strong>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
                        </div>
                        <div class="toast-body">
                            ${message}
                        </div>
                    </div>
                </div>
            `;
            
            $('body').append(toastHTML);
            
            // Eliminar el toast después de 3 segundos
            setTimeout(() => {
                $('.toast').last().fadeOut(() => {
                    $('.toast').last().parent().remove();
                });
            }, 3000);
        }

        // Datos de ejemplo para pruebas
        function loadSampleData() {
            // Profesionales de ejemplo
            const sampleProfessionals = [
                new Professional("Robert Downey Jr.", 58, 78, 174, false, "Estadounidense", 0, "Actor"),
                new Professional("Christopher Nolan", 53, 75, 181, false, "Británico", 1, "Director"),
                new Professional("Stan Lee", 95, 70, 178, true, "Estadounidense", 0, "Escritor"),
                new Professional("Kevin Feige", 50, 80, 175, false, "Estadounidense", 0, "Productor"),
                new Professional("Scarlett Johansson", 39, 57, 160, false, "Estadounidense", 0, "Actor"),
                new Professional("Martin Scorsese", 81, 75, 163, false, "Estadounidense", 1, "Director")
            ];
            
            professionals.push(...sampleProfessionals);
            
            // Actualizar displays
            displayProfessionals();
            updateProfessionalSelectors();
            
            // Películas de ejemplo
            setTimeout(() => {
                const sampleMovies = [
                    new Movie(
                        "Iron Man",
                        2008,
                        [sampleProfessionals[0].id], // Robert Downey Jr.
                        "Estados Unidos",
                        sampleProfessionals[1].id, // Christopher Nolan (ejemplo)
                        sampleProfessionals[2].id, // Stan Lee
                        "Inglés",
                        "Disney+",
                        true,
                        "Tony Stark",
                        "Marvel Studios",
                        "Paramount Pictures",
                        "Acción",
                        "https://images.unsplash.com/photo-1635863138275-d9864ba5f2a8?w=400&h=600&fit=crop"
                    ),
                    new Movie(
                        "Black Widow",
                        2021,
                        [sampleProfessionals[4].id], // Scarlett Johansson
                        "Estados Unidos",
                        sampleProfessionals[5].id, // Martin Scorsese (ejemplo)
                        sampleProfessionals[2].id, // Stan Lee
                        "Inglés",
                        "Disney+",
                        true,
                        "Natasha Romanoff",
                        "Marvel Studios",
                        "Walt Disney Studios",
                        "Acción",
                        "https://images.unsplash.com/photo-1594909122845-11baa439b7bf?w=400&h=600&fit=crop"
                    )
                ];
                
                movies.push(...sampleMovies);
                displayMovies();
                showSuccessMessage('Datos de ejemplo cargados');
            }, 1000);
        }

        // Función para cargar datos de ejemplo (para desarrollo)
        setTimeout(() => {
            if (professionals.length === 0) {
                const loadSample = confirm('¿Deseas cargar datos de ejemplo para probar la aplicación?');
                if (loadSample) {
                    loadSampleData();
                }
            }
        }, 2000);

        // Función para exportar datos
        function exportData() {
            const data = {
                professionals: professionals,
                movies: movies,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = 'movie_system_data.json';
            link.click();
        }

        // Función para importar datos
        function importData(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const data = JSON.parse(e.target.result);
                        
                        if (data.professionals && data.movies) {
                            professionals = data.professionals;
                            movies = data.movies;
                            
                            displayProfessionals();
                            displayMovies();
                            updateProfessionalSelectors();
                            
                            showSuccessMessage('Datos importados correctamente');
                        }
                    } catch (error) {
                        alert('Error al importar el archivo. Verifica que sea un archivo JSON válido.');
                    }
                };
                reader.readAsText(file);
            }
        }

        // Agregar botones de exportar/importar al navbar
        $(document).ready(function() {
            const exportImportHTML = `
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        <i class="fas fa-cog me-1"></i>Opciones
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#" onclick="exportData()">
                            <i class="fas fa-download me-2"></i>Exportar Datos
                        </a></li>
                        <li><a class="dropdown-item" href="#" onclick="document.getElementById('importFile').click()">
                            <i class="fas fa-upload me-2"></i>Importar Datos
                        </a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#" onclick="loadSampleData()">
                            <i class="fas fa-database me-2"></i>Cargar Datos de Ejemplo
                        </a></li>
                    </ul>
                </li>
                <input type="file" id="importFile" accept=".json" style="display: none" onchange="importData(event)">
            `;
            $('.navbar-nav').append(exportImportHTML);
        });
    </script>
</body>
</html>